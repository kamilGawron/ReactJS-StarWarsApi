(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,a){e.exports=a.p+"static/media/logo.61bd89c4.png"},25:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAADwAAAA8ABA9l7mgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAA9SURBVGiB7dexEQAwCAMxkv13JhOkg4NCmsBfOgIA5pzMzOkRle70gGqCAACgiz+0nSAAAOjiD20nCAD4ex0HDApOZYj1AAAAAElFTkSuQmCC"},26:function(e,t,a){e.exports=a(41)},31:function(e,t,a){},32:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(21),l=a.n(s),c=(a(31),a(3)),i=a(4),o=a(6),m=a(5),h=a(7);a(32);var u=function(){return r.a.createElement("div",{className:"loader"},"Loading...",r.a.createElement("div",null),r.a.createElement("div",null))};function d(e){var t=e.searchName,a=e.inputChangeHandler,n=e.peoplesList,s=e.toShow,l=e.showMoreHandler;return r.a.createElement("div",{className:"peoples"},r.a.createElement("input",{value:t,onChange:a,type:"text",placeholder:"find your favourite character"}),r.a.createElement("div",{className:"peoples-list"},n.slice(0,s)),n.length>s?r.a.createElement("div",{onClick:l,className:"showMore"},r.a.createElement("div",{onClick:l},"Show More")):"")}var p=a(13);function v(e,t){var a="";if(e&&t)for(var n in e)e[n]!=t[n]&&(a+=e[n]);return a}function f(){return new Promise(function(e,t){fetch("https://swapi.co/api/people?page=1").then(function(e){return e.json()}).then(function(e){return Math.ceil(e.count/10)}).then(function(t){for(var a=[],n=[],r=function(r){fetch("https://swapi.co/api/people?page=".concat(r)).then(function(e){return e.json()}).then(function(e){return e.results}).then(function(e){return a=[].concat(Object(p.a)(a),Object(p.a)(e))}).then(function(e){return e.map(function(e){return e.id=v(e.url,"https://swapi.co/api/people/"),e})}).then(function(a){n=a,r==t&&e(n)}).catch(function(e){return console.log("Err in pages",e)})},s=1;s<=t;s++)r(s)}).catch(function(e){return console.log("err in first page",e)})})}function E(e){return new Promise(function(t,a){console.log("in promise");fetch("https://swapi.co/api/people/".concat(e)).then(function(e){return e.json()}).then(function(e){var a,n,r,s;Promise.all([(s=e.films,new Promise(function(e,t){var a=[];if(s)if(s.length>0)for(var n=0;n<s.length;n++)fetch("".concat(s[n])).then(function(e){return e.json()}).then(function(e){return a=[].concat(Object(p.a)(a),[e.title])}).then(function(){s.length==a.length&&(console.log("resolve films promise"),e(a))}).catch(function(e){return console.log("err in fetch films",e)});else console.log("resolve films promise"),e([]);else e([])})),(r=e.homeworld,new Promise(function(e,t){r?fetch(r).then(function(e){return e.json()}).then(function(t){console.log("resolve homeworld promise"),e(t.name)}).catch(function(e){return console.log("err in fetch homeworld",e)}):e("")})),(n=e.starships,new Promise(function(e,t){var a=[];if(n)if(n.length>0)for(var r=0;r<n.length;r++)console.log("in for loop starships promise"),fetch("".concat(n[r])).then(function(e){return e.json()}).then(function(e){return a=[].concat(Object(p.a)(a),[e.name])}).then(function(){n.length==a.length&&(console.log("resolve starships promise"),e(a))}).catch(function(e){return console.log("err in fetch starships",e)});else console.log("resolve starships promise"),e([]);else e([])})),(a=e.vehicles,new Promise(function(e,t){var n=[];if(a)if(a.length>0)for(var r=0;r<a.length;r++)fetch("".concat(a[r])).then(function(e){return e.json()}).then(function(e){return n=[].concat(Object(p.a)(n),[e.name])}).then(function(){a.length==n.length&&(console.log("resolve vehicles promise"),e(n))}).catch(function(e){return console.log("err in fetch vehicles",e)});else console.log("resolve vehicles promise"),e([]);else e([])}))]).then(function(a){var n=a[0],r=a[1],s=a[2],l=a[3];t({data:e,filmsArr:n,homeworld:r,starshipsArr:s,vehiclesArr:l})})})})}var g=a(2);var N=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(o.a)(this,Object(m.a)(t).call(this))).handleScroll=function(e){document.getElementById("header").style.backgroundColor=window.scrollY>50?"rgba(0,0,0,1)":"rgba(0,0,0,.7)"},e.showMoreHandler=function(){e.setState(function(e){return{toShow:e.toShow+10}})},e.inputChangeHandler=function(t){e.setState({searchName:t.target.value})},e.state={peoples:[],page:1,maxPage:0,charAmount:0,searchName:"",toShow:10},e}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;f().then(function(t){return e.setState({peoples:t})}),window.addEventListener("scroll",this.handleScroll.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll.bind(this))}},{key:"render",value:function(){var e,t;if(this.state.peoples[10]){console.log(this.state.peoples);var a=(e=this.state.peoples,t=this.state.searchName,e.filter(function(e){return e.name.toLowerCase().includes(t.toLowerCase())}).map(function(e,t){return r.a.createElement("h4",{key:t},r.a.createElement(g.b,{to:"characters/".concat(e.id)},e.name))}));return r.a.createElement(d,{searchName:this.state.searchName,inputChangeHandler:this.inputChangeHandler,peoplesList:a,toShow:this.state.toShow,showMoreHandler:this.showMoreHandler})}return r.a.createElement(u,null)}}]),t}(n.Component),w=a(14);function A(e){var t=e.gender,a=e.birthYear,n=e.hairColor,s=e.mass,l=e.height,c=e.eyeColor,i=e.skinColor;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"prop"},r.a.createElement("div",{className:"title"},"Gender:"),r.a.createElement("div",{className:"desc"},t)),r.a.createElement("div",{className:"prop"},r.a.createElement("div",{className:"title"},"Birth year:"),r.a.createElement("div",{className:"desc"},a)),r.a.createElement("div",{className:"prop"},r.a.createElement("div",{className:"title"},"Hair color:"),r.a.createElement("div",{className:"desc"},n)),r.a.createElement("div",{className:"prop"},r.a.createElement("div",{className:"title"},"Mass:"),r.a.createElement("div",{className:"desc"},s)),r.a.createElement("div",{className:"prop"},r.a.createElement("div",{className:"title"},"Height:"),r.a.createElement("div",{className:"desc"},l)),r.a.createElement("div",{className:"prop"},r.a.createElement("div",{className:"title"},"Eye color:"),r.a.createElement("div",{className:"desc"},c)),r.a.createElement("div",{className:"prop"},r.a.createElement("div",{className:"title"},"Skin color:"),r.a.createElement("div",{className:"desc"},i)))}function b(e){var t=e.films.map(function(e,t){return r.a.createElement("div",{key:t},e)});return r.a.createElement("div",{className:"prop"},r.a.createElement("div",{className:"title"},"Related films:"),r.a.createElement("div",{className:"desc"},t))}function C(e){var t=e.starships.map(function(e,t){return r.a.createElement("div",{key:t},e)});return r.a.createElement("div",{className:"prop"},r.a.createElement("div",{className:"title"},"Related starships: "),r.a.createElement("div",{className:"desc"},t))}function k(e){return r.a.createElement("div",{className:"prop"},r.a.createElement("div",{className:"title"},"Homeworld:"),r.a.createElement("div",{className:"desc"},e.homeworld))}function j(e){var t=e.vehicles.map(function(e,t){return r.a.createElement("div",{key:t},e)});return r.a.createElement("div",{className:"prop"},r.a.createElement("div",{className:"title"},"Vehicles:"),r.a.createElement("div",{className:"desc"},t))}var O=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).loadData=function(e){Promise.all([f(),E(e)]).then(function(e){a.setState({maxCharId:e[0].length+1,details:e[1].data,loadDetails:!0,films:e[1].filmsArr,starships:e[1].starshipsArr,vehicles:e[1].vehiclesArr,homeworld:e[1].homeworld})})},a.prevNextHandler=function(e){var t=Object(w.a)(a);a.setState({loadDetails:!1,id:e},function(){0==e?e=a.state.maxCharId:e==a.state.maxCharId&&(e=1),console.log("id after cond",e),t.loadData(e)})},a.onBackButtonEvent=function(){a.prevNextHandler(v(window.location.href,"https://kamilgawron.github.io/characters"))},a.state={id:e.match.params.id,details:{},films:[],vehicles:[],starships:[],homeworld:"",loadDetails:!1,maxCharId:0},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){window.onpopstate=this.onBackButtonEvent,console.log("stateid",this.state.id),this.loadData(this.state.id)}},{key:"componentWillUnmount",value:function(){window.onpopstate=function(){}}},{key:"render",value:function(){return console.log(this.state.loadDetails),this.state.loadDetails?r.a.createElement("div",{className:"character"},r.a.createElement("h2",null,this.state.details.name),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"left"},r.a.createElement(A,{gender:this.state.details.gender,birthYear:this.state.details.birth_year,hairColor:this.state.details.hair_color,mass:this.state.details.mass,height:this.state.details.height,eyeColor:this.state.details.eye_color,skinColor:this.state.details.skin_color})),r.a.createElement("div",{className:"right"},this.state.films[0]?r.a.createElement(b,{films:this.state.films}):"",this.state.starships[0]?r.a.createElement(C,{starships:this.state.starships}):"",""!=this.state.homeworld?r.a.createElement(k,{homeworld:this.state.homeworld}):"",this.state.vehicles[0]?r.a.createElement(j,{vehicles:this.state.vehicles}):"")),r.a.createElement("div",{className:"buttons"},r.a.createElement(g.b,{to:"../".concat(1!=this.state.id?parseInt(this.state.id)-1:this.state.maxCharId,"/")},r.a.createElement("div",{onClick:this.prevNextHandler.bind(this,parseInt(this.state.id)-1),className:"prev"},"PREV")),r.a.createElement(g.b,{to:"../".concat(this.state.id!=this.state.maxCharId?parseInt(this.state.id)+1:0,"/")},r.a.createElement("div",{onClick:this.prevNextHandler.bind(this,parseInt(this.state.id)+1),className:"next"},"NEXT"))),r.a.createElement("div",{className:"preparation"},"This page is still under preparation.")):r.a.createElement(u,null)}}]),t}(n.Component),y=a(24),x=a.n(y),H=a(25),I=a.n(H);function S(e){var t=e.menuItemClickHandler,a=e.linkTo,n=e.text;return r.a.createElement("div",null,r.a.createElement(g.b,{onClick:t,to:a},n))}function B(e){var t=e.logo,a=e.phoneMenuHandler,n=e.menuItemClickHandler,s=e.menuIcon;return r.a.createElement("header",{id:"header"},r.a.createElement("div",{className:"logo"},r.a.createElement(g.b,{to:"/"},r.a.createElement("img",{src:t,alt:""}))),r.a.createElement("div",{id:"menu-items",className:"items"},r.a.createElement("div",{onClick:a,className:"close"},"X"),r.a.createElement(S,{menuItemClickHandler:n,linkTo:"/",text:"Home"}),r.a.createElement(S,{menuItemClickHandler:n,linkTo:"/characters",text:"Characters"}),r.a.createElement(S,{menuItemClickHandler:n,linkTo:"/planets",text:"Planets"}),r.a.createElement(S,{menuItemClickHandler:n,linkTo:"/starships",text:"Starships"})),r.a.createElement("div",{className:"menu-icon-phone"},r.a.createElement("img",{onClick:a,src:s,alt:""})))}var D=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(o.a)(this,Object(m.a)(t).call(this))).menuItemClickHandler=function(){var e=document.getElementById("menu-items");e.style.display="flex"==e.style.display?"none":""},e.phoneMenuHandler=function(){var e=document.getElementById("menu-items");e.style.display="flex"==e.style.display?"none":"flex"},e.state={},e}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(B,{logo:x.a,phoneMenuHandler:this.phoneMenuHandler,menuItemClickHandler:this.menuItemClickHandler,menuIcon:I.a})}}]),t}(n.Component),M=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(o.a)(this,Object(m.a)(t).call(this))).state={},e}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"home"},r.a.createElement("h2",null,"Find informations about Your favourites Characters, Planets and Starships!"),r.a.createElement("div",{className:"stormtroopers"}))}}]),t}(n.Component),P=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(o.a)(this,Object(m.a)(t).call(this))).state={},e}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"preparation"},"This page is under preparation and will be opened at a later stage."),r.a.createElement("div",{className:"stormtroopers"}))}}]),t}(n.Component),T=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(o.a)(this,Object(m.a)(t).call(this))).state={},e}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"preparation"},"This page is under preparation and will be opened at a later stage."),r.a.createElement("div",{className:"stormtroopers"}))}}]),t}(n.Component),L=a(11),R=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(o.a)(this,Object(m.a)(t).call(this))).state={},e}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(g.a,null,r.a.createElement(D,null),r.a.createElement("div",{className:"padding"}),r.a.createElement(L.a,{exact:!0,path:"/",component:M}),r.a.createElement(L.a,{exact:!0,path:"/ReactJS-StarWarsApi",component:M}),r.a.createElement(L.a,{exact:!0,path:"/planets",component:T}),r.a.createElement(L.a,{exact:!0,path:"/starships",component:P}),r.a.createElement(L.a,{exact:!0,path:"/characters",component:N}),r.a.createElement(L.a,{path:"/characters/:id",component:O})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[26,1,2]]]);
//# sourceMappingURL=main.ab5bcd6b.chunk.js.map